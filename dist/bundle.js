(()=>{"use strict";var e={d:(r,s)=>{for(var d in s)e.o(s,d)&&!e.o(r,d)&&Object.defineProperty(r,d,{enumerable:!0,get:s[d]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};async function s(){const e=await fetch("https://api.unstoppabledomains.com/resolve/supported_tlds",{method:"GET"});let r=await e.json();await async function(e){return await snap.request({method:"snap_manageState",params:{operation:"update",newState:{tlds:e,date:(new Date).toISOString()},encrypted:!1}})}(r.tlds)}async function d(){const e=await snap.request({method:"snap_manageState",params:{operation:"get",encrypted:!1}});return e&&Array.isArray(e.tlds)&&e.date?{tlds:e.tlds,date:e.date}:{tlds:[],date:null}}e.r(r),e.d(r,{onNameLookup:()=>a});const o=function(e,r){let s;return function(...d){return s&&clearTimeout(s),new Promise(((o,a)=>{s=setTimeout((()=>{e.apply(this,d).then(o).catch(a)}),r)}))}}((async e=>{const r=await async function(e){const r=await fetch(`https://api.unstoppabledomains.com/mm-snap/resolve/domains/${e}`,{method:"GET"}),s=await r.json();return s}(e);return r}),600);const a=async e=>{const{chainId:r,domain:a}=e;let t=await d();var c;if((0===t.tlds.length||t.date&&(!(c=t.date)||new Date(c)<new Date(Date.now()-6048e5)))&&await s(),await async function(e){const r=await d(),s=e.toLowerCase().split("."),o=s[s.length-1];return r.tlds.some((e=>o===e.toLowerCase()))}(a)){const e=await o(a);let s;switch(r){case"eip155:1":case"eip155:8453":s=e.records["token.EVM.ETH.address"]??e.records["token.EVM.ETH.ETH.address"]??e.records["crypto.ETH.address"];break;case"eip155:137":s=e.records["token.EVM.MATIC.address"]??e.records["token.EVM.MATIC.MATIC.address"]??e.records["crypto.MATIC.version.MATIC.address"];break;case"eip155:43114":s=e.records["token.EVM.AVAX.address"]??e.records["token.EVM.AVAX.AVAX.address"]??e.records["crypto.AVAX.address"];break;case"eip155:56":s=e.records["token.EVM.BSC.address"]??e.records["token.EVM.BSC.BNB.address"]??e.records["crypto.BNB.version.BEP20.address"];break;case"eip155:250":s=e.records["token.EVM.FTM.address"]??e.records["token.EVM.FTM.FTM.address"]??e.records["crypto.FTM.version.OPERA.address"];break;case"eip155:100009":s=e.records["token.EVM.VET.address"]??e.records["token.EVM.VET.VET.address"]??e.records["crypto.VET.address"];break;case"eip155:42220":s=e.records["token.EVM.CELO.address"]??e.records["token.EVM.CELO.CELO.address"]??e.records["crypto.CELO.address"];break;case"eip155:66":s=e.records["token.EVM.OKTC.address"]??e.records["token.EVM.OKTC.OKT.address"]??e.records["crypto.OKT.address"];break;case"eip155:14":s=e.records["token.EVM.FLR.address"]??e.records["token.EVM.FLR.FLR.address"]??e.records["crypto.FLR.address"];break;case"eip155:7332":s=e.records["token.EVM.ZEN.address"]??e.records["token.EVM.ZEN.ZEN.address"]??e.records["crypto.ZEN.address"];break;case"eip155:4689":s=e.records["token.EVM.IOTX.address"]??e.records["token.EVM.IOTX.IOTX.address"]??e.records["crypto.IOTX.address"];break;case"eip155:888":s=e.records["token.EVM.WAN.address"]??e.records["token.EVM.WAN.WAN.address"]??e.records["crypto.WAN.address"];break;case"eip155:196":s=e.records["token.EVM.OKB.address"]??e.records["token.EVM.OKB.OKB.address"]??e.records["crypto.OKB.address"];break;case"eip155:122":s=e.records["token.EVM.FUSE.address"]??e.records["token.EVM.FUSE.FUSE.address"]??e.records["crypto.FUSE.version.FUSE.address"];break;case"eip155:106":s=e.records["token.EVM.VLX.address"]??e.records["token.EVM.VLX.VLX.address"]??e.records["crypto.VLX.address"];break;case"eip155:11":s=e.records["token.EVM.META.address"]??e.records["token.EVM.META.META.address"]??e.records["crypto.META.address"];break;case"eip155:1030":s=e.records["token.EVM.CFX.address"]??e.records["token.EVM.CFX.CFX.address"]??e.records["crypto.CFX.address"];break;case"eip155:30":s=e.records["token.EVM.RSK.address"]??e.records["token.EVM.RSK.RSK.address"]??e.records["crypto.RSK.address"];break;case"eip155:20":s=e.records["token.EVM.ESC.address"]??e.records["token.EVM.ESC.ELA.address"]??e.records["crypto.ELA.version.ESC.address"];break;case"eip155:8":s=e.records["token.EVM.UBQ.address"]??e.records["token.EVM.UBQ.UBQ.address"]??e.records["crypto.UBQ.address"];break;case"eip155:4488":s=e.records["token.EVM.HYDRA.address"]??e.records["token.EVM.HYDRA.HYDRA.address"]??e.records["crypto.HYDRA.address"];break;case"eip155:192837465":s=e.records["token.EVM.GTH.address"]??e.records["token.EVM.GTH.GTH.address"]??e.records["crypto.GTH.address"];break;default:console.log(`ChainId ${r} not supported`)}if(s)return{resolvedAddresses:[{resolvedAddress:s,protocol:"Unstoppable Domains",domainName:a}]}}return null};var t=exports;for(var c in r)t[c]=r[c];r.__esModule&&Object.defineProperty(t,"__esModule",{value:!0})})();